{"ast":null,"code":"import * as apiUtil from '../utils/session';\nimport { receiveErrors } from \"./error\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Login from \"../components/Login\";\nexport const RECEIVE_CURRENT_USER = 'RECEIVE_CURRENT_USER';\nexport const LOGOUT_CURRENT_USER = 'LOGOUT_CURRENT_USER';\nexport const UPDATE_DIET = 'UPDATE_DIET';\n\nconst receiveCurrentUser = user => ({\n  type: RECEIVE_CURRENT_USER,\n  user\n});\n\nconst receiveCurrentUserDiet = (user, diet) => ({\n  type: UPDATE_DIET,\n  user,\n  diet\n});\n\nconst logoutCurrentUser = () => ({\n  type: LOGOUT_CURRENT_USER\n});\n\nexport const getUser = () => {\n  return receiveCurrentUser();\n};\nexport const login = user => async dispatch => {\n  const response = await apiUtil.login(user);\n  const data = await response.json();\n\n  if (response.ok) {\n    return dispatch(receiveCurrentUser(data));\n  }\n\n  return dispatch(receiveErrors(data));\n};\nexport const signup = user => async dispatch => {\n  const response = await apiUtil.signup(user);\n  const data = await response.json();\n\n  if (response.ok) {\n    return dispatch(receiveCurrentUser(data));\n  }\n\n  return dispatch(receiveErrors(data));\n};\nexport const logout = () => async dispatch => {\n  const response = await apiUtil.logout();\n  const data = await response.json();\n  console.log(response);\n\n  if (response.status == \"422\") {\n    console.log(\"hello\");\n    window.location.reload(false);\n  }\n\n  if (response.ok) {\n    return dispatch(logoutCurrentUser());\n  }\n\n  return dispatch(receiveErrors(data));\n};\nexport const diet = (user, diet) => async dispatch => {\n  const response = await apiUtil.diet();\n  const data = await response.json();\n\n  if (response.ok) {\n    return dispatch(receiveCurrentUserDiet());\n  }\n\n  return dispatch(receiveErrors(data));\n};","map":{"version":3,"names":["apiUtil","receiveErrors","Route","Redirect","Login","RECEIVE_CURRENT_USER","LOGOUT_CURRENT_USER","UPDATE_DIET","receiveCurrentUser","user","type","receiveCurrentUserDiet","diet","logoutCurrentUser","getUser","login","dispatch","response","data","json","ok","signup","logout","console","log","status","window","location","reload"],"sources":["/Users/jordanswalker/Documents/html/WeddingWebsite/SessionAuth/frontend/src/actions/session.js"],"sourcesContent":["import * as apiUtil from '../utils/session';\nimport { receiveErrors } from \"./error\";\nimport { Route, Redirect} from \"react-router-dom\";\nimport Login from \"../components/Login\";\n\nexport const RECEIVE_CURRENT_USER = 'RECEIVE_CURRENT_USER';\nexport const LOGOUT_CURRENT_USER = 'LOGOUT_CURRENT_USER';\nexport const UPDATE_DIET = 'UPDATE_DIET';\n\nconst receiveCurrentUser = user => ({\n  type: RECEIVE_CURRENT_USER,\n  user\n});\nconst receiveCurrentUserDiet = (user, diet) => ({\n  type: UPDATE_DIET,\n  user,\n  diet\n});\nconst logoutCurrentUser = () => ({\n  type: LOGOUT_CURRENT_USER\n});\n\nexport const getUser = () => {\n    return receiveCurrentUser();\n};\n\nexport const login = user => async dispatch => {\n    const response = await apiUtil.login(user);\n    const data = await response.json();\n  if (response.ok) {\n      return dispatch(receiveCurrentUser(data));\n    }\n    return dispatch(receiveErrors(data));\n};\n  export const signup = user => async dispatch => {\n    const response = await apiUtil.signup(user);\n    const data = await response.json();\n    \n    if (response.ok) {\n      return dispatch(receiveCurrentUser(data));\n    }\n    return dispatch(receiveErrors(data));\n};\n  export const logout = () => async dispatch => {\n    const response = await apiUtil.logout();\n    const data = await response.json();\n    console.log(response)\n    if(response.status == \"422\"){\n      console.log(\"hello\");\n      window.location.reload(false);\n\n    }\n    if (response.ok) {\n      return dispatch(logoutCurrentUser());\n    }\n    return dispatch(receiveErrors(data));\n};\n\nexport const diet = (user, diet) => async dispatch => {\n  const response = await apiUtil.diet();\n  const data = await response.json();\nif (response.ok) {\n    return dispatch(receiveCurrentUserDiet());\n  }\n  return dispatch(receiveErrors(data));\n};"],"mappings":"AAAA,OAAO,KAAKA,OAAZ,MAAyB,kBAAzB;AACA,SAASC,aAAT,QAA8B,SAA9B;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAA+B,kBAA/B;AACA,OAAOC,KAAP,MAAkB,qBAAlB;AAEA,OAAO,MAAMC,oBAAoB,GAAG,sBAA7B;AACP,OAAO,MAAMC,mBAAmB,GAAG,qBAA5B;AACP,OAAO,MAAMC,WAAW,GAAG,aAApB;;AAEP,MAAMC,kBAAkB,GAAGC,IAAI,KAAK;EAClCC,IAAI,EAAEL,oBAD4B;EAElCI;AAFkC,CAAL,CAA/B;;AAIA,MAAME,sBAAsB,GAAG,CAACF,IAAD,EAAOG,IAAP,MAAiB;EAC9CF,IAAI,EAAEH,WADwC;EAE9CE,IAF8C;EAG9CG;AAH8C,CAAjB,CAA/B;;AAKA,MAAMC,iBAAiB,GAAG,OAAO;EAC/BH,IAAI,EAAEJ;AADyB,CAAP,CAA1B;;AAIA,OAAO,MAAMQ,OAAO,GAAG,MAAM;EACzB,OAAON,kBAAkB,EAAzB;AACH,CAFM;AAIP,OAAO,MAAMO,KAAK,GAAGN,IAAI,IAAI,MAAMO,QAAN,IAAkB;EAC3C,MAAMC,QAAQ,GAAG,MAAMjB,OAAO,CAACe,KAAR,CAAcN,IAAd,CAAvB;EACA,MAAMS,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;;EACF,IAAIF,QAAQ,CAACG,EAAb,EAAiB;IACb,OAAOJ,QAAQ,CAACR,kBAAkB,CAACU,IAAD,CAAnB,CAAf;EACD;;EACD,OAAOF,QAAQ,CAACf,aAAa,CAACiB,IAAD,CAAd,CAAf;AACH,CAPM;AAQL,OAAO,MAAMG,MAAM,GAAGZ,IAAI,IAAI,MAAMO,QAAN,IAAkB;EAC9C,MAAMC,QAAQ,GAAG,MAAMjB,OAAO,CAACqB,MAAR,CAAeZ,IAAf,CAAvB;EACA,MAAMS,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;;EAEA,IAAIF,QAAQ,CAACG,EAAb,EAAiB;IACf,OAAOJ,QAAQ,CAACR,kBAAkB,CAACU,IAAD,CAAnB,CAAf;EACD;;EACD,OAAOF,QAAQ,CAACf,aAAa,CAACiB,IAAD,CAAd,CAAf;AACH,CARQ;AASP,OAAO,MAAMI,MAAM,GAAG,MAAM,MAAMN,QAAN,IAAkB;EAC5C,MAAMC,QAAQ,GAAG,MAAMjB,OAAO,CAACsB,MAAR,EAAvB;EACA,MAAMJ,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;EACAI,OAAO,CAACC,GAAR,CAAYP,QAAZ;;EACA,IAAGA,QAAQ,CAACQ,MAAT,IAAmB,KAAtB,EAA4B;IAC1BF,OAAO,CAACC,GAAR,CAAY,OAAZ;IACAE,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;EAED;;EACD,IAAIX,QAAQ,CAACG,EAAb,EAAiB;IACf,OAAOJ,QAAQ,CAACH,iBAAiB,EAAlB,CAAf;EACD;;EACD,OAAOG,QAAQ,CAACf,aAAa,CAACiB,IAAD,CAAd,CAAf;AACH,CAbQ;AAeT,OAAO,MAAMN,IAAI,GAAG,CAACH,IAAD,EAAOG,IAAP,KAAgB,MAAMI,QAAN,IAAkB;EACpD,MAAMC,QAAQ,GAAG,MAAMjB,OAAO,CAACY,IAAR,EAAvB;EACA,MAAMM,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAT,EAAnB;;EACF,IAAIF,QAAQ,CAACG,EAAb,EAAiB;IACb,OAAOJ,QAAQ,CAACL,sBAAsB,EAAvB,CAAf;EACD;;EACD,OAAOK,QAAQ,CAACf,aAAa,CAACiB,IAAD,CAAd,CAAf;AACD,CAPM"},"metadata":{},"sourceType":"module"}